{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import{auth,app}from\"./Config\";import{onAuthStateChanged,signInWithEmailAndPassword,createUserWithEmailAndPassword,sendPasswordResetEmail,confirmPasswordReset,signInWithCredential,FacebookAuthProvider,getAuth,updateCurrentUser}from\"firebase/auth\";var authentication=getAuth(app);function getCurrentUser(){return _regeneratorRuntime.async(function getCurrentUser$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(onAuthStateChanged(auth,function(user){if(user!=null){console.log(user.email);}}));case 2:case\"end\":return _context.stop();}}},null,null,null,Promise);}function isSignedIn(){return _regeneratorRuntime.async(function isSignedIn$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"from isSignedIn method: \",authentication.currentUser);_context2.next=3;return _regeneratorRuntime.awrap(authentication.currentUser);case 3:_context2.t0=_context2.sent;return _context2.abrupt(\"return\",_context2.t0!=null);case 5:case\"end\":return _context2.stop();}}},null,null,null,Promise);}function getUserUId(){return _regeneratorRuntime.async(function getUserUId$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(authentication.currentUser!=null)){_context3.next=4;break;}return _context3.abrupt(\"return\",authentication.currentUser.uid);case 4:return _context3.abrupt(\"return\",null);case 5:case\"end\":return _context3.stop();}}},null,null,null,Promise);}function getUserToken(){return _regeneratorRuntime.async(function getUserToken$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(authentication.currentUser!=null)){_context4.next=4;break;}_context4.next=3;return _regeneratorRuntime.awrap(authentication.currentUser.getIdToken());case 3:return _context4.abrupt(\"return\",_context4.sent);case 4:return _context4.abrupt(\"return\",null);case 5:case\"end\":return _context4.stop();}}},null,null,null,Promise);}function register(email,password){return _regeneratorRuntime.async(function register$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return _regeneratorRuntime.awrap(createUserWithEmailAndPassword(auth,email,password));case 2:case\"end\":return _context5.stop();}}},null,null,null,Promise);}function login(email,password){return _regeneratorRuntime.async(function login$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return _regeneratorRuntime.awrap(signInWithEmailAndPassword(auth,email,password));case 2:case\"end\":return _context6.stop();}}},null,null,null,Promise);}function signout(){return _regeneratorRuntime.async(function signout$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:authentication.signOut().then().catch(function(e){return console.log(e.message);});case 1:case\"end\":return _context7.stop();}}},null,null,null,Promise);}function forgotpassword(email){return _regeneratorRuntime.async(function forgotpassword$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return _regeneratorRuntime.awrap(sendPasswordResetEmail(auth,email).then(function(){alert(\"Password reset email sent!\");}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;}));case 2:case\"end\":return _context8.stop();}}},null,null,null,Promise);}export{register,login,signout,isSignedIn,getUserUId,getUserToken,forgotpassword,getCurrentUser};","map":{"version":3,"names":["auth","app","onAuthStateChanged","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","confirmPasswordReset","signInWithCredential","FacebookAuthProvider","getAuth","updateCurrentUser","authentication","getCurrentUser","_regeneratorRuntime","async","getCurrentUser$","_context","prev","next","awrap","user","console","log","email","stop","Promise","isSignedIn","isSignedIn$","_context2","currentUser","t0","sent","abrupt","getUserUId","getUserUId$","_context3","uid","getUserToken","getUserToken$","_context4","getIdToken","register","password","register$","_context5","login","login$","_context6","signout","signout$","_context7","signOut","then","catch","e","message","forgotpassword","forgotpassword$","_context8","alert","error","errorCode","code","errorMessage"],"sources":["C:/Users/Ahmed Hamza/Desktop/Mal3ab project/Mala3b-Project/db/Auth.js"],"sourcesContent":["import { auth, app } from \"./Config\";\r\nimport {\r\n  onAuthStateChanged,\r\n  signInWithEmailAndPassword,\r\n  createUserWithEmailAndPassword,\r\n  sendPasswordResetEmail,\r\n  confirmPasswordReset,\r\n  signInWithCredential,\r\n  FacebookAuthProvider,\r\n  getAuth,\r\n  updateCurrentUser,\r\n} from \"firebase/auth\";\r\n\r\nconst authentication = getAuth(app);\r\n\r\nasync function getCurrentUser() {\r\n  await onAuthStateChanged(auth, (user) => {\r\n    if (user != null) {\r\n      console.log(user.email);\r\n    }\r\n\r\n    // Do other things\r\n  });\r\n}\r\n\r\nasync function isSignedIn() {\r\n  console.log(\"from isSignedIn method: \", authentication.currentUser);\r\n  return (await authentication.currentUser) != null;\r\n}\r\n\r\nasync function getUserUId() {\r\n  if (authentication.currentUser != null) {\r\n    return authentication.currentUser.uid;\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nasync function getUserToken() {\r\n  if (authentication.currentUser != null) {\r\n    return await authentication.currentUser.getIdToken();\r\n  }\r\n  return null;\r\n}\r\n\r\nasync function register(email, password) {\r\n  await createUserWithEmailAndPassword(auth, email, password);\r\n}\r\n\r\nasync function login(email, password) {\r\n  await signInWithEmailAndPassword(auth, email, password);\r\n}\r\n\r\nasync function signout() {\r\n  authentication\r\n    .signOut()\r\n    .then()\r\n    .catch((e) => console.log(e.message));\r\n}\r\n\r\nasync function forgotpassword(email) {\r\n  await sendPasswordResetEmail(auth, email)\r\n    .then(() => {\r\n      alert(\"Password reset email sent!\");\r\n    })\r\n    .catch((error) => {\r\n      const errorCode = error.code;\r\n      const errorMessage = error.message;\r\n      // ..\r\n    });\r\n}\r\n\r\nexport {\r\n  register,\r\n  login,\r\n  signout,\r\n  isSignedIn,\r\n  getUserUId,\r\n  getUserToken,\r\n  forgotpassword,\r\n  getCurrentUser,\r\n};\r\n"],"mappings":"4DAAA,OAASA,IAAI,CAAEC,GAAG,gBAClB,OACEC,kBAAkB,CAClBC,0BAA0B,CAC1BC,8BAA8B,CAC9BC,sBAAsB,CACtBC,oBAAoB,CACpBC,oBAAoB,CACpBC,oBAAoB,CACpBC,OAAO,CACPC,iBAAiB,KACZ,eAAe,CAEtB,GAAM,CAAAC,cAAc,CAAGF,OAAO,CAACR,GAAG,CAAC,CAEnC,QAAe,CAAAW,cAAcA,CAAA,SAAAC,mBAAA,CAAAC,KAAA,UAAAC,gBAAAC,QAAA,kBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,UAAAL,mBAAA,CAAAM,KAAA,CACrBjB,kBAAkB,CAACF,IAAI,CAAE,SAACoB,IAAI,CAAK,CACvC,GAAIA,IAAI,EAAI,IAAI,CAAE,CAChBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACG,KAAK,CAAC,CACzB,CAGF,CAAC,CAAC,0BAAAP,QAAA,CAAAQ,IAAA,sBAAAC,OAAA,GAGJ,QAAe,CAAAC,UAAUA,CAAA,SAAAb,mBAAA,CAAAC,KAAA,UAAAa,YAAAC,SAAA,kBAAAA,SAAA,CAAAX,IAAA,CAAAW,SAAA,CAAAV,IAAA,SACvBG,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEX,cAAc,CAACkB,WAAW,CAAC,CAACD,SAAA,CAAAV,IAAA,UAAAL,mBAAA,CAAAM,KAAA,CACtDR,cAAc,CAACkB,WAAW,SAAAD,SAAA,CAAAE,EAAA,CAAAF,SAAA,CAAAG,IAAA,QAAAH,SAAA,CAAAI,MAAA,UAAAJ,SAAA,CAAAE,EAAA,EAAK,IAAI,0BAAAF,SAAA,CAAAJ,IAAA,sBAAAC,OAAA,GAGnD,QAAe,CAAAQ,UAAUA,CAAA,SAAApB,mBAAA,CAAAC,KAAA,UAAAoB,YAAAC,SAAA,kBAAAA,SAAA,CAAAlB,IAAA,CAAAkB,SAAA,CAAAjB,IAAA,cACnBP,cAAc,CAACkB,WAAW,EAAI,IAAI,GAAAM,SAAA,CAAAjB,IAAA,iBAAAiB,SAAA,CAAAH,MAAA,UAC7BrB,cAAc,CAACkB,WAAW,CAACO,GAAG,gBAAAD,SAAA,CAAAH,MAAA,UAE9B,IAAI,0BAAAG,SAAA,CAAAX,IAAA,sBAAAC,OAAA,GAIf,QAAe,CAAAY,YAAYA,CAAA,SAAAxB,mBAAA,CAAAC,KAAA,UAAAwB,cAAAC,SAAA,kBAAAA,SAAA,CAAAtB,IAAA,CAAAsB,SAAA,CAAArB,IAAA,cACrBP,cAAc,CAACkB,WAAW,EAAI,IAAI,GAAAU,SAAA,CAAArB,IAAA,UAAAqB,SAAA,CAAArB,IAAA,UAAAL,mBAAA,CAAAM,KAAA,CACvBR,cAAc,CAACkB,WAAW,CAACW,UAAU,CAAC,CAAC,gBAAAD,SAAA,CAAAP,MAAA,UAAAO,SAAA,CAAAR,IAAA,gBAAAQ,SAAA,CAAAP,MAAA,UAE/C,IAAI,0BAAAO,SAAA,CAAAf,IAAA,sBAAAC,OAAA,GAGb,QAAe,CAAAgB,QAAQA,CAAClB,KAAK,CAAEmB,QAAQ,SAAA7B,mBAAA,CAAAC,KAAA,UAAA6B,UAAAC,SAAA,kBAAAA,SAAA,CAAA3B,IAAA,CAAA2B,SAAA,CAAA1B,IAAA,SAAA0B,SAAA,CAAA1B,IAAA,UAAAL,mBAAA,CAAAM,KAAA,CAC/Bf,8BAA8B,CAACJ,IAAI,CAAEuB,KAAK,CAAEmB,QAAQ,CAAC,0BAAAE,SAAA,CAAApB,IAAA,sBAAAC,OAAA,GAG7D,QAAe,CAAAoB,KAAKA,CAACtB,KAAK,CAAEmB,QAAQ,SAAA7B,mBAAA,CAAAC,KAAA,UAAAgC,OAAAC,SAAA,kBAAAA,SAAA,CAAA9B,IAAA,CAAA8B,SAAA,CAAA7B,IAAA,SAAA6B,SAAA,CAAA7B,IAAA,UAAAL,mBAAA,CAAAM,KAAA,CAC5BhB,0BAA0B,CAACH,IAAI,CAAEuB,KAAK,CAAEmB,QAAQ,CAAC,0BAAAK,SAAA,CAAAvB,IAAA,sBAAAC,OAAA,GAGzD,QAAe,CAAAuB,OAAOA,CAAA,SAAAnC,mBAAA,CAAAC,KAAA,UAAAmC,SAAAC,SAAA,kBAAAA,SAAA,CAAAjC,IAAA,CAAAiC,SAAA,CAAAhC,IAAA,SACpBP,cAAc,CACXwC,OAAO,CAAC,CAAC,CACTC,IAAI,CAAC,CAAC,CACNC,KAAK,CAAC,SAACC,CAAC,QAAK,CAAAjC,OAAO,CAACC,GAAG,CAACgC,CAAC,CAACC,OAAO,CAAC,GAAC,CAAC,wBAAAL,SAAA,CAAA1B,IAAA,sBAAAC,OAAA,GAG1C,QAAe,CAAA+B,cAAcA,CAACjC,KAAK,SAAAV,mBAAA,CAAAC,KAAA,UAAA2C,gBAAAC,SAAA,kBAAAA,SAAA,CAAAzC,IAAA,CAAAyC,SAAA,CAAAxC,IAAA,SAAAwC,SAAA,CAAAxC,IAAA,UAAAL,mBAAA,CAAAM,KAAA,CAC3Bd,sBAAsB,CAACL,IAAI,CAAEuB,KAAK,CAAC,CACtC6B,IAAI,CAAC,UAAM,CACVO,KAAK,CAAC,4BAA4B,CAAC,CACrC,CAAC,CAAC,CACDN,KAAK,CAAC,SAACO,KAAK,CAAK,CAChB,GAAM,CAAAC,SAAS,CAAGD,KAAK,CAACE,IAAI,CAC5B,GAAM,CAAAC,YAAY,CAAGH,KAAK,CAACL,OAAO,CAEpC,CAAC,CAAC,0BAAAG,SAAA,CAAAlC,IAAA,sBAAAC,OAAA,GAGN,OACEgB,QAAQ,CACRI,KAAK,CACLG,OAAO,CACPtB,UAAU,CACVO,UAAU,CACVI,YAAY,CACZmB,cAAc,CACd5C,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}