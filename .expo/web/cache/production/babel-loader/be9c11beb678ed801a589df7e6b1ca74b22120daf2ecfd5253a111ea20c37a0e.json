{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TextInput from\"react-native-web/dist/exports/TextInput\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import React,{useState}from\"react\";import{addFStadium,deleteFStadium,getFStadium}from\"../db/Stadium/Football\";import{getUserUId}from\"../db/Auth\";import{updateFootball}from\"../db/User\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ValidationPage(_ref){var navigation=_ref.navigation,route=_ref.route;var stadName=route.params.name;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),stDate=_useState2[0],setStDate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),edDate=_useState4[0],setEdDate=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),day=_useState6[0],setDay=_useState6[1];function handel(){console.log(\"begin handle\",stadName);if(stDate!==\"\"&&edDate!==\"\"&&day!==\"\"&&stDate!==edDate){console.log(\"after validate\");getFStadium().then(function(data){console.log(\"number of stad size=\",data.length);var _loop=function _loop(i){if(data[i].name===stadName){console.log(\"found the stad\",data[i]);var flag=true;if(data[i].state===null){data[i].state=[];}for(var j=0;j<data[i].state.length;j++){if(data[i].state[j].day===day){if(stDate<data[i].state[j].edDate&&stDate>=data[i].state[j].stDate||data[i].state[j].stDate>=stDate&&data[i].state[j].stDate<edDate)alert(\"already occupied\");flag=false;navigation.navigate(\"Football\");break;}}if(flag){getUserUId().then(function(id){data[i].state.push({day:day,stDate:stDate,edDate:edDate,id:id});updateFootball(data[i]);});navigation.navigate(\"Payment\",{stDate:stDate,edDate:edDate,day:day});}return\"break\";}};for(var i=0;i<data.length;i++){var _ret=_loop(i);if(_ret===\"break\")break;}});}else{alert(\"data is required\");}}return _jsx(View,{style:styles.container,children:_jsxs(View,{style:styles.component,children:[_jsx(TextInput,{style:styles.textinput,placeholder:\"Enter the day\",onChangeText:setDay,keyboardType:\"default\",placeholderTextColor:\"#22223b\"}),_jsx(TextInput,{style:styles.textinput,placeholder:\"Enter start time\",onChangeText:setStDate,keyboardType:\"default\",placeholderTextColor:\"#22223b\"}),_jsx(TextInput,{style:styles.textinput,placeholder:\"Enter end time\",onChangeText:setEdDate,keyboardType:\"default\",placeholderTextColor:\"#22223b\"}),_jsx(TouchableOpacity,{style:styles.button,onPress:handel,children:_jsx(Text,{style:styles.buttontext,children:\"Book\"})})]})});}var cardwidth=Math.round(Dimensions.get(\"window\").width);var styles=StyleSheet.create({container:{flex:1,alignItems:\"center\",justifyContent:\"center\",backgroundColor:\"#f2e9e4\"},component:{flex:1,backgroundColor:\"#22223b\",borderRadius:20,width:cardwidth-100,marginVertical:60,alignItems:\"center\",justifyContent:\"center\",shadowColor:\"#000000\",shadowOffset:{width:5,height:5},shadowOpacity:0.25,shadowRadius:3},textinput:{marginBottom:20,paddingLeft:5,width:\"75%\",height:40,backgroundColor:\"#f2e9e4\",borderRadius:15},buttontext:{color:\"#22223b\",fontSize:15,fontWeight:\"500\"},button:{backgroundColor:\"#f2e9e4\",marginTop:20,width:120,height:50,borderRadius:10,justifyContent:\"center\",alignItems:\"center\"}});","map":{"version":3,"names":["React","useState","addFStadium","deleteFStadium","getFStadium","getUserUId","updateFootball","jsx","_jsx","jsxs","_jsxs","ValidationPage","_ref","navigation","route","stadName","params","name","_useState","_useState2","_slicedToArray","stDate","setStDate","_useState3","_useState4","edDate","setEdDate","_useState5","_useState6","day","setDay","handel","console","log","then","data","length","_loop","i","flag","state","j","alert","navigate","id","push","_ret","View","style","styles","container","children","component","TextInput","textinput","placeholder","onChangeText","keyboardType","placeholderTextColor","TouchableOpacity","button","onPress","Text","buttontext","cardwidth","Math","round","Dimensions","get","width","StyleSheet","create","flex","alignItems","justifyContent","backgroundColor","borderRadius","marginVertical","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","marginBottom","paddingLeft","color","fontSize","fontWeight","marginTop"],"sources":["C:/Users/Ahmed Hamza/Desktop/Mal3ab project/Mala3b-Project/Pages/ValidationPage.jsx"],"sourcesContent":["import {\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  Text,\r\n  View,\r\n  TextInput,\r\n  ScrollView,\r\n  Dimensions,\r\n} from \"react-native\";\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  addFStadium,\r\n  deleteFStadium,\r\n  getFStadium,\r\n} from \"../db/Stadium/Football\";\r\nimport { getUserUId } from \"../db/Auth\";\r\nimport { updateFootball } from \"../db/User\";\r\n\r\nexport default function ValidationPage({ navigation, route }) {\r\n  let { name: stadName } = route.params; //name -> att. in doc.\r\n\r\n  const [stDate, setStDate] = useState(\"\"); //start date\r\n  const [edDate, setEdDate] = useState(\"\"); //end date\r\n  const [day, setDay] = useState(\"\");\r\n\r\n  function handel() {\r\n    console.log(\"begin handle\", stadName);\r\n    if (stDate !== \"\" && edDate !== \"\" && day !== \"\" && stDate !== edDate) {\r\n      console.log(\"after validate\");\r\n      getFStadium().then((data) => {\r\n        console.log(\"number of stad size=\", data.length);\r\n        for (let i = 0; i < data.length; i++) {\r\n          if (data[i].name === stadName) {\r\n            console.log(\"found the stad\", data[i]);\r\n            let flag = true; // true ->stad is available\r\n            if (data[i].state === null) {\r\n              //if there is no array, set a new one\r\n              data[i].state = []; //new array\r\n            }\r\n            /* add \"balance\" in db and manage it here*/\r\n            for (let j = 0; j < data[i].state.length; j++) {\r\n              if (data[i].state[j].day === day) {\r\n                //same day isn't enough\r\n                if (\r\n                  (stDate < data[i].state[j].edDate &&\r\n                    stDate >= data[i].state[j].stDate) || //check in same hours interval\r\n                  (data[i].state[j].stDate >= stDate &&\r\n                    data[i].state[j].stDate < edDate)\r\n                )\r\n                  alert(\"already occupied\");\r\n                flag = false; //stad is unavailable after occupation\r\n                navigation.navigate(\"Football\");\r\n                break;\r\n              }\r\n            }\r\n            if (flag) {\r\n              //if flag is available i.e. \"true\", add userId with the \"date\" that he\r\n              getUserUId().then((id) => {\r\n                // gets id of current user in \"id\"\r\n                data[i].state.push({ day, stDate, edDate, id }); //note that we made \"id\" same as \"document ID\" manually\r\n                updateFootball(data[i]);\r\n              });\r\n              navigation.navigate(\"Payment\", { stDate, edDate, day });\r\n            }\r\n            break;\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      alert(\"data is required\");\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.component}>\r\n        <TextInput\r\n          style={styles.textinput}\r\n          placeholder=\"Enter the day\"\r\n          onChangeText={setDay}\r\n          keyboardType=\"default\"\r\n          placeholderTextColor={\"#22223b\"}\r\n        />\r\n\r\n        <TextInput\r\n          style={styles.textinput}\r\n          placeholder=\"Enter start time\"\r\n          onChangeText={setStDate}\r\n          keyboardType=\"default\"\r\n          placeholderTextColor={\"#22223b\"}\r\n        />\r\n\r\n        <TextInput\r\n          style={styles.textinput}\r\n          placeholder=\"Enter end time\"\r\n          onChangeText={setEdDate}\r\n          keyboardType=\"default\"\r\n          placeholderTextColor={\"#22223b\"}\r\n        />\r\n\r\n        <TouchableOpacity style={styles.button} onPress={handel}>\r\n          <Text style={styles.buttontext}>Book</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\nconst cardwidth = Math.round(Dimensions.get(\"window\").width);\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"#f2e9e4\",\r\n  },\r\n  component: {\r\n    flex: 1,\r\n    backgroundColor: \"#22223b\",\r\n    borderRadius: 20,\r\n    width: cardwidth - 100,\r\n    marginVertical: 60,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    shadowColor: \"#000000\",\r\n    shadowOffset: {\r\n      width: 5,\r\n      height: 5,\r\n    },\r\n    shadowOpacity: 0.25,\r\n    shadowRadius: 3,\r\n  },\r\n  textinput: {\r\n    marginBottom: 20,\r\n    paddingLeft: 5,\r\n    width: \"75%\",\r\n    height: 40,\r\n    backgroundColor: \"#f2e9e4\",\r\n    borderRadius: 15,\r\n  },\r\n  buttontext: {\r\n    color: \"#22223b\",\r\n    fontSize: 15,\r\n    fontWeight: \"500\",\r\n  },\r\n  button: {\r\n    backgroundColor: \"#f2e9e4\",\r\n    marginTop: 20,\r\n    width: 120,\r\n    height: 50,\r\n    borderRadius: 10,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}