{"ast":null,"code":"'use strict';\n\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar Blob = require(\"./Blob\");\n\nvar EventTarget = require('event-target-shim');\n\nimport NativeFileReaderModule from \"./NativeFileReaderModule\";\nvar READER_EVENTS = ['abort', 'error', 'load', 'loadstart', 'loadend', 'progress'];\nvar EMPTY = 0;\nvar LOADING = 1;\nvar DONE = 2;\n\nvar FileReader = function (_ref) {\n  _inherits(FileReader, _ref);\n\n  var _super = _createSuper(FileReader);\n\n  function FileReader() {\n    var _this;\n\n    _classCallCheck(this, FileReader);\n\n    _this = _super.call(this);\n    _this.EMPTY = EMPTY;\n    _this.LOADING = LOADING;\n    _this.DONE = DONE;\n    _this._aborted = false;\n    _this._subscriptions = [];\n\n    _this._reset();\n\n    return _this;\n  }\n\n  _createClass(FileReader, [{\n    key: \"_reset\",\n    value: function _reset() {\n      this._readyState = EMPTY;\n      this._error = null;\n      this._result = null;\n    }\n  }, {\n    key: \"_clearSubscriptions\",\n    value: function _clearSubscriptions() {\n      this._subscriptions.forEach(function (sub) {\n        return sub.remove();\n      });\n\n      this._subscriptions = [];\n    }\n  }, {\n    key: \"_setReadyState\",\n    value: function _setReadyState(newState) {\n      this._readyState = newState;\n      this.dispatchEvent({\n        type: 'readystatechange'\n      });\n\n      if (newState === DONE) {\n        if (this._aborted) {\n          this.dispatchEvent({\n            type: 'abort'\n          });\n        } else if (this._error) {\n          this.dispatchEvent({\n            type: 'error'\n          });\n        } else {\n          this.dispatchEvent({\n            type: 'load'\n          });\n        }\n\n        this.dispatchEvent({\n          type: 'loadend'\n        });\n      }\n    }\n  }, {\n    key: \"readAsArrayBuffer\",\n    value: function readAsArrayBuffer() {\n      throw new Error('FileReader.readAsArrayBuffer is not implemented');\n    }\n  }, {\n    key: \"readAsDataURL\",\n    value: function readAsDataURL(blob) {\n      var _this2 = this;\n\n      this._aborted = false;\n\n      if (blob == null) {\n        throw new TypeError(\"Failed to execute 'readAsDataURL' on 'FileReader': parameter 1 is not of type 'Blob'\");\n      }\n\n      NativeFileReaderModule.readAsDataURL(blob.data).then(function (text) {\n        if (_this2._aborted) {\n          return;\n        }\n\n        _this2._result = text;\n\n        _this2._setReadyState(DONE);\n      }, function (error) {\n        if (_this2._aborted) {\n          return;\n        }\n\n        _this2._error = error;\n\n        _this2._setReadyState(DONE);\n      });\n    }\n  }, {\n    key: \"readAsText\",\n    value: function readAsText(blob) {\n      var _this3 = this;\n\n      var encoding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'UTF-8';\n      this._aborted = false;\n\n      if (blob == null) {\n        throw new TypeError(\"Failed to execute 'readAsText' on 'FileReader': parameter 1 is not of type 'Blob'\");\n      }\n\n      NativeFileReaderModule.readAsText(blob.data, encoding).then(function (text) {\n        if (_this3._aborted) {\n          return;\n        }\n\n        _this3._result = text;\n\n        _this3._setReadyState(DONE);\n      }, function (error) {\n        if (_this3._aborted) {\n          return;\n        }\n\n        _this3._error = error;\n\n        _this3._setReadyState(DONE);\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort() {\n      this._aborted = true;\n\n      if (this._readyState !== EMPTY && this._readyState !== DONE) {\n        this._reset();\n\n        this._setReadyState(DONE);\n      }\n\n      this._reset();\n    }\n  }, {\n    key: \"readyState\",\n    get: function get() {\n      return this._readyState;\n    }\n  }, {\n    key: \"error\",\n    get: function get() {\n      return this._error;\n    }\n  }, {\n    key: \"result\",\n    get: function get() {\n      return this._result;\n    }\n  }]);\n\n  return FileReader;\n}(EventTarget.apply(void 0, READER_EVENTS));\n\nFileReader.EMPTY = EMPTY;\nFileReader.LOADING = LOADING;\nFileReader.DONE = DONE;\nmodule.exports = FileReader;","map":{"version":3,"sources":["D:/khaled/Matriels/Third Year/Second term/CS303/CS303-Project-1/node_modules/react-native/Libraries/Blob/FileReader.js"],"names":["Blob","require","EventTarget","NativeFileReaderModule","READER_EVENTS","EMPTY","LOADING","DONE","FileReader","_aborted","_subscriptions","_reset","_readyState","_error","_result","forEach","sub","remove","newState","dispatchEvent","type","Error","blob","TypeError","readAsDataURL","data","then","text","_setReadyState","error","encoding","readAsText","module","exports"],"mappings":"AAUA;;;;;;;;;;;;AAEA,IAAMA,IAAI,GAAGC,OAAO,UAApB;;AACA,IAAMC,WAAW,GAAGD,OAAO,CAAC,mBAAD,CAA3B;;AAEA,OAAOE,sBAAP;AASA,IAAMC,aAAa,GAAG,CACpB,OADoB,EAEpB,OAFoB,EAGpB,MAHoB,EAIpB,WAJoB,EAKpB,SALoB,EAMpB,UANoB,CAAtB;AASA,IAAMC,KAAK,GAAG,CAAd;AACA,IAAMC,OAAO,GAAG,CAAhB;AACA,IAAMC,IAAI,GAAG,CAAb;;IAEMC,U;;;;;AAeJ,wBAAc;AAAA;;AAAA;;AACZ;AADY,UAVdH,KAUc,GAVEA,KAUF;AAAA,UATdC,OASc,GATIA,OASJ;AAAA,UARdC,IAQc,GARCA,IAQD;AAAA,UAHdE,QAGc,GAHM,KAGN;AAAA,UAFdC,cAEc,GAFa,EAEb;;AAEZ,UAAKC,MAAL;;AAFY;AAGb;;;;WAED,kBAAe;AACb,WAAKC,WAAL,GAAmBP,KAAnB;AACA,WAAKQ,MAAL,GAAc,IAAd;AACA,WAAKC,OAAL,GAAe,IAAf;AACD;;;WAED,+BAA4B;AAC1B,WAAKJ,cAAL,CAAoBK,OAApB,CAA4B,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,MAAJ,EAAJ;AAAA,OAA/B;;AACA,WAAKP,cAAL,GAAsB,EAAtB;AACD;;;WAED,wBAAeQ,QAAf,EAAqC;AACnC,WAAKN,WAAL,GAAmBM,QAAnB;AACA,WAAKC,aAAL,CAAmB;AAACC,QAAAA,IAAI,EAAE;AAAP,OAAnB;;AACA,UAAIF,QAAQ,KAAKX,IAAjB,EAAuB;AACrB,YAAI,KAAKE,QAAT,EAAmB;AACjB,eAAKU,aAAL,CAAmB;AAACC,YAAAA,IAAI,EAAE;AAAP,WAAnB;AACD,SAFD,MAEO,IAAI,KAAKP,MAAT,EAAiB;AACtB,eAAKM,aAAL,CAAmB;AAACC,YAAAA,IAAI,EAAE;AAAP,WAAnB;AACD,SAFM,MAEA;AACL,eAAKD,aAAL,CAAmB;AAACC,YAAAA,IAAI,EAAE;AAAP,WAAnB;AACD;;AACD,aAAKD,aAAL,CAAmB;AAACC,UAAAA,IAAI,EAAE;AAAP,SAAnB;AACD;AACF;;;WAED,6BAAoB;AAClB,YAAM,IAAIC,KAAJ,CAAU,iDAAV,CAAN;AACD;;;WAED,uBAAcC,IAAd,EAA2B;AAAA;;AACzB,WAAKb,QAAL,GAAgB,KAAhB;;AAEA,UAAIa,IAAI,IAAI,IAAZ,EAAkB;AAChB,cAAM,IAAIC,SAAJ,CACJ,sFADI,CAAN;AAGD;;AAEDpB,MAAAA,sBAAsB,CAACqB,aAAvB,CAAqCF,IAAI,CAACG,IAA1C,EAAgDC,IAAhD,CACE,UAACC,IAAD,EAAkB;AAChB,YAAI,MAAI,CAAClB,QAAT,EAAmB;AACjB;AACD;;AACD,QAAA,MAAI,CAACK,OAAL,GAAea,IAAf;;AACA,QAAA,MAAI,CAACC,cAAL,CAAoBrB,IAApB;AACD,OAPH,EAQE,UAAAsB,KAAK,EAAI;AACP,YAAI,MAAI,CAACpB,QAAT,EAAmB;AACjB;AACD;;AACD,QAAA,MAAI,CAACI,MAAL,GAAcgB,KAAd;;AACA,QAAA,MAAI,CAACD,cAAL,CAAoBrB,IAApB;AACD,OAdH;AAgBD;;;WAED,oBAAWe,IAAX,EAAoD;AAAA;;AAAA,UAA5BQ,QAA4B,uEAAT,OAAS;AAClD,WAAKrB,QAAL,GAAgB,KAAhB;;AAEA,UAAIa,IAAI,IAAI,IAAZ,EAAkB;AAChB,cAAM,IAAIC,SAAJ,CACJ,mFADI,CAAN;AAGD;;AAEDpB,MAAAA,sBAAsB,CAAC4B,UAAvB,CAAkCT,IAAI,CAACG,IAAvC,EAA6CK,QAA7C,EAAuDJ,IAAvD,CACE,UAACC,IAAD,EAAkB;AAChB,YAAI,MAAI,CAAClB,QAAT,EAAmB;AACjB;AACD;;AACD,QAAA,MAAI,CAACK,OAAL,GAAea,IAAf;;AACA,QAAA,MAAI,CAACC,cAAL,CAAoBrB,IAApB;AACD,OAPH,EAQE,UAAAsB,KAAK,EAAI;AACP,YAAI,MAAI,CAACpB,QAAT,EAAmB;AACjB;AACD;;AACD,QAAA,MAAI,CAACI,MAAL,GAAcgB,KAAd;;AACA,QAAA,MAAI,CAACD,cAAL,CAAoBrB,IAApB;AACD,OAdH;AAgBD;;;WAED,iBAAQ;AACN,WAAKE,QAAL,GAAgB,IAAhB;;AAEA,UAAI,KAAKG,WAAL,KAAqBP,KAArB,IAA8B,KAAKO,WAAL,KAAqBL,IAAvD,EAA6D;AAC3D,aAAKI,MAAL;;AACA,aAAKiB,cAAL,CAAoBrB,IAApB;AACD;;AAED,WAAKI,MAAL;AACD;;;SAED,eAA6B;AAC3B,aAAO,KAAKC,WAAZ;AACD;;;SAED,eAAoB;AAClB,aAAO,KAAKC,MAAZ;AACD;;;SAED,eAA4B;AAC1B,aAAO,KAAKC,OAAZ;AACD;;;;EA7HuBZ,WAAW,MAAX,SAAeE,aAAf,C;;AAApBI,U,CACGH,K,GAAgBA,K;AADnBG,U,CAEGF,O,GAAkBA,O;AAFrBE,U,CAGGD,I,GAAeA,I;AA6HxByB,MAAM,CAACC,OAAP,GAAiBzB,UAAjB","sourcesContent":["/**\r\n * Copyright (c) Facebook, Inc. and its affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n * @format\r\n */\r\n\r\n'use strict';\r\n\r\nconst Blob = require('./Blob');\r\nconst EventTarget = require('event-target-shim');\r\n\r\nimport NativeFileReaderModule from './NativeFileReaderModule';\r\n\r\ntype ReadyState =\r\n  | 0 // EMPTY\r\n  | 1 // LOADING\r\n  | 2; // DONE\r\n\r\ntype ReaderResult = string | ArrayBuffer;\r\n\r\nconst READER_EVENTS = [\r\n  'abort',\r\n  'error',\r\n  'load',\r\n  'loadstart',\r\n  'loadend',\r\n  'progress',\r\n];\r\n\r\nconst EMPTY = 0;\r\nconst LOADING = 1;\r\nconst DONE = 2;\r\n\r\nclass FileReader extends (EventTarget(...READER_EVENTS): any) {\r\n  static EMPTY: number = EMPTY;\r\n  static LOADING: number = LOADING;\r\n  static DONE: number = DONE;\r\n\r\n  EMPTY: number = EMPTY;\r\n  LOADING: number = LOADING;\r\n  DONE: number = DONE;\r\n\r\n  _readyState: ReadyState;\r\n  _error: ?Error;\r\n  _result: ?ReaderResult;\r\n  _aborted: boolean = false;\r\n  _subscriptions: Array<*> = [];\r\n\r\n  constructor() {\r\n    super();\r\n    this._reset();\r\n  }\r\n\r\n  _reset(): void {\r\n    this._readyState = EMPTY;\r\n    this._error = null;\r\n    this._result = null;\r\n  }\r\n\r\n  _clearSubscriptions(): void {\r\n    this._subscriptions.forEach(sub => sub.remove());\r\n    this._subscriptions = [];\r\n  }\r\n\r\n  _setReadyState(newState: ReadyState) {\r\n    this._readyState = newState;\r\n    this.dispatchEvent({type: 'readystatechange'});\r\n    if (newState === DONE) {\r\n      if (this._aborted) {\r\n        this.dispatchEvent({type: 'abort'});\r\n      } else if (this._error) {\r\n        this.dispatchEvent({type: 'error'});\r\n      } else {\r\n        this.dispatchEvent({type: 'load'});\r\n      }\r\n      this.dispatchEvent({type: 'loadend'});\r\n    }\r\n  }\r\n\r\n  readAsArrayBuffer() {\r\n    throw new Error('FileReader.readAsArrayBuffer is not implemented');\r\n  }\r\n\r\n  readAsDataURL(blob: ?Blob) {\r\n    this._aborted = false;\r\n\r\n    if (blob == null) {\r\n      throw new TypeError(\r\n        \"Failed to execute 'readAsDataURL' on 'FileReader': parameter 1 is not of type 'Blob'\",\r\n      );\r\n    }\r\n\r\n    NativeFileReaderModule.readAsDataURL(blob.data).then(\r\n      (text: string) => {\r\n        if (this._aborted) {\r\n          return;\r\n        }\r\n        this._result = text;\r\n        this._setReadyState(DONE);\r\n      },\r\n      error => {\r\n        if (this._aborted) {\r\n          return;\r\n        }\r\n        this._error = error;\r\n        this._setReadyState(DONE);\r\n      },\r\n    );\r\n  }\r\n\r\n  readAsText(blob: ?Blob, encoding: string = 'UTF-8') {\r\n    this._aborted = false;\r\n\r\n    if (blob == null) {\r\n      throw new TypeError(\r\n        \"Failed to execute 'readAsText' on 'FileReader': parameter 1 is not of type 'Blob'\",\r\n      );\r\n    }\r\n\r\n    NativeFileReaderModule.readAsText(blob.data, encoding).then(\r\n      (text: string) => {\r\n        if (this._aborted) {\r\n          return;\r\n        }\r\n        this._result = text;\r\n        this._setReadyState(DONE);\r\n      },\r\n      error => {\r\n        if (this._aborted) {\r\n          return;\r\n        }\r\n        this._error = error;\r\n        this._setReadyState(DONE);\r\n      },\r\n    );\r\n  }\r\n\r\n  abort() {\r\n    this._aborted = true;\r\n    // only call onreadystatechange if there is something to abort, as per spec\r\n    if (this._readyState !== EMPTY && this._readyState !== DONE) {\r\n      this._reset();\r\n      this._setReadyState(DONE);\r\n    }\r\n    // Reset again after, in case modified in handler\r\n    this._reset();\r\n  }\r\n\r\n  get readyState(): ReadyState {\r\n    return this._readyState;\r\n  }\r\n\r\n  get error(): ?Error {\r\n    return this._error;\r\n  }\r\n\r\n  get result(): ?ReaderResult {\r\n    return this._result;\r\n  }\r\n}\r\n\r\nmodule.exports = FileReader;\r\n"]},"metadata":{},"sourceType":"module"}