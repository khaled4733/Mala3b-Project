{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { auth, app } from \"./Config\";\nimport { onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, confirmPasswordReset, signInWithCredential, FacebookAuthProvider, getAuth, updateCurrentUser } from \"firebase/auth\";\nvar authentication = getAuth(app);\n\nfunction isSignedIn() {\n  return _regeneratorRuntime.async(function isSignedIn$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          console.log('from isSignedIn method: ', authentication.currentUser);\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(authentication.currentUser);\n\n        case 3:\n          _context.t0 = _context.sent;\n          return _context.abrupt(\"return\", _context.t0 != null);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction getUserUId() {\n  return _regeneratorRuntime.async(function getUserUId$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!(authentication.currentUser != null)) {\n            _context2.next = 4;\n            break;\n          }\n\n          return _context2.abrupt(\"return\", authentication.currentUser.uid);\n\n        case 4:\n          return _context2.abrupt(\"return\", null);\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction getUserToken() {\n  return _regeneratorRuntime.async(function getUserToken$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          if (!(authentication.currentUser != null)) {\n            _context3.next = 4;\n            break;\n          }\n\n          _context3.next = 3;\n          return _regeneratorRuntime.awrap(authentication.currentUser.getIdToken());\n\n        case 3:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 4:\n          return _context3.abrupt(\"return\", null);\n\n        case 5:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction register(email, password) {\n  return _regeneratorRuntime.async(function register$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _regeneratorRuntime.awrap(createUserWithEmailAndPassword(auth, email, password));\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction login(email, password) {\n  return _regeneratorRuntime.async(function login$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.next = 2;\n          return _regeneratorRuntime.awrap(signInWithEmailAndPassword(auth, email, password));\n\n        case 2:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction signout() {\n  return _regeneratorRuntime.async(function signout$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          authentication.signOut().then().catch(function (e) {\n            return console.log(e.message);\n          });\n\n        case 1:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nfunction forgotpassword(email) {\n  return _regeneratorRuntime.async(function forgotpassword$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return _regeneratorRuntime.awrap(sendPasswordResetEmail(auth, email).then(function () {\n            alert('Password reset email sent!');\n          }).catch(function (error) {\n            var errorCode = error.code;\n            var errorMessage = error.message;\n          }));\n\n        case 2:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nvar user = auth.currentUser;\n\nfunction getcurrentuser() {\n  if (user) {\n    var User = {\n      id: user.id,\n      fullname: user.fullname,\n      email: user.email,\n      phone: user.phone,\n      gender: user.gender,\n      balance: user.balance,\n      role: user.role\n    };\n    return User;\n  } else {\n    alert('No user is signed in');\n  }\n}\n\nexport { register, login, signout, isSignedIn, getUserUId, getUserToken, forgotpassword, getcurrentuser };","map":{"version":3,"sources":["D:/khaled/Matriels/Third Year/Second term/CS303/New folder (2)/CS303-Project/db/Auth.js"],"names":["auth","app","onAuthStateChanged","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","confirmPasswordReset","signInWithCredential","FacebookAuthProvider","getAuth","updateCurrentUser","authentication","isSignedIn","console","log","currentUser","getUserUId","uid","getUserToken","getIdToken","register","email","password","login","signout","signOut","then","catch","e","message","forgotpassword","alert","error","errorCode","code","errorMessage","user","getcurrentuser","User","id","fullname","phone","gender","balance","role"],"mappings":"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","sourcesContent":["import { auth, app } from \"./Config\";\r\nimport {\r\n  onAuthStateChanged,\r\n  signInWithEmailAndPassword,\r\n  createUserWithEmailAndPassword,\r\n  sendPasswordResetEmail,\r\n  confirmPasswordReset,\r\n  signInWithCredential,\r\n  FacebookAuthProvider, getAuth, updateCurrentUser,\r\n} from \"firebase/auth\";\r\n\r\nconst authentication = getAuth(app);\r\n\r\n// onAuthStateChanged(auth, (user) => {\r\n//   if (user != null) {\r\n//     console.log(\"We are authenticated now!\");\r\n//   }\r\n//\r\n//   // Do other things\r\n// });\r\n\r\nasync function isSignedIn() {\r\n\r\n  console.log('from isSignedIn method: ', authentication.currentUser);\r\n  return await authentication.currentUser != null;\r\n}\r\n\r\nasync function getUserUId() {\r\n  if (authentication.currentUser != null) {\r\n    return authentication.currentUser.uid;\r\n  } else {\r\n    return null;\r\n  }\r\n}\r\n\r\nasync function getUserToken() {\r\n  if (authentication.currentUser != null) {\r\n    return await authentication.currentUser.getIdToken();\r\n  }\r\n  return null;\r\n}\r\n\r\nasync function register(email, password) {\r\n  await createUserWithEmailAndPassword(auth, email, password);\r\n\r\n\r\n}\r\n\r\nasync function login(email, password) {\r\n  await signInWithEmailAndPassword(auth, email, password);\r\n\r\n}\r\n\r\nasync function signout() {\r\n  authentication.signOut().then().catch((e) => console.log(e.message));\r\n}\r\n\r\nasync function forgotpassword(email) {\r\n  await sendPasswordResetEmail(auth, email)\r\n    .then(() => {\r\n      alert('Password reset email sent!')\r\n    })\r\n    .catch((error) => {\r\n      const errorCode = error.code;\r\n      const errorMessage = error.message;\r\n      // ..\r\n    });\r\n}\r\n\r\nconst user = auth.currentUser;\r\n\r\nfunction getcurrentuser() {\r\n  if (user) {\r\n    var User = {\r\n      id: user.id,\r\n      fullname: user.fullname,\r\n      email: user.email,\r\n      phone: user.phone,\r\n      gender: user.gender,\r\n      balance: user.balance,\r\n      role: user.role\r\n    }\r\n    return User\r\n  } else {\r\n    alert('No user is signed in');\r\n  }\r\n}\r\n\r\nexport { register, login, signout, isSignedIn, getUserUId, getUserToken, forgotpassword, getcurrentuser };\r\n"]},"metadata":{},"sourceType":"module"}